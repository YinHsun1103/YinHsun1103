import streamlit as st
import pandas as pd
import numpy as np
from PIL import Image
import random

# åˆå§‹åŒ–çŠ¶æ€ä¿¡æ¯
state = st.session_state
if "selected_tab" not in state:
    state.selected_tab = "Steamlitç»ƒä¹ "

# åˆ›å»ºé€‰é¡¹å¡
tabs = ["Steamlitç»ƒä¹ ", "HomeWork1"]
state.selected_tab = st.sidebar.radio("é€‰æ‹©é¡µé¢", tabs, index=tabs.index(state.selected_tab))

# é¡µé¢å†…å®¹
if state.selected_tab == "Steamlitç»ƒä¹ ":
    st.title("Steamlitç»ƒä¹ ")

    st.title('Hello, streamlitï¼æˆ‘çš„ç¬¬ä¸€æ”¯webæ‡‰ç”¨ç¨‹å¼é–‹ç™¼!!!')
    st.write('æˆ‘æ˜¯ä¸€å€‹å­—ä¸²')
    K = 9999
    st.write(K)

    dataframe = pd.DataFrame(np.random.randn(10, 20), columns=[f"col_{i}" for i in range(20)])
    st.write(dataframe)

    st.markdown("# é€™æ˜¯ä¸€å€‹ç¤ºä¾‹ Streamlit ç¶²é ")
    st.markdown('''Streamlit can write text in pretty colors.''')
    st.markdown("Here's a bouquet ğŸŒ¸")

    st.title("æ­¡è¿ä¾†åˆ°æˆ‘çš„ç¶²ç«™")
    st.header("é€™æ˜¯ä¸€å€‹æ¨™é ­")

    st.caption("é€™æ˜¯ä¸€å¼µç¾éº—çš„åœ–ç‰‡")
    st.code("print('Hello, Streamlit!')")

    st.latex(r"e^{i\pi} + 1 = 0")

    st.write("é€™æ˜¯ä¸€å€‹åˆ†éš”ç·š")
    st.divider()

    df = pd.DataFrame(np.random.randn(10, 10), columns=("col %d" % i for i in range(10)))
    st.dataframe(df)

    st.metric(label="æº«åº¦", value="30 Â°C", delta="1.2 Â°C")

    # é¡¯ç¤ºéš¨æ©Ÿè¡¨æ ¼å’Œåœ°åœ–
    df_boundaries = pd.DataFrame({
        "å€åŸŸ": ["ä¸­æ­£å€", "å¤§åŒå€"],
        "è¥¿ç¶“åº¦": [121.506623, 121.511034],
        "æ±ç¶“åº¦": [121.529235, 121.525196],
        "å—ç·¯åº¦": [25.032883, 25.062731],
        "åŒ—ç·¯åº¦": [25.041144, 25.066231],
    })
    df_boundaries['äººå£æ•¸'] = np.random.randint(100, 1000, len(df_boundaries))
    st.map(df_boundaries[['å—ç·¯åº¦', 'è¥¿ç¶“åº¦']])

    # ä¸‹è¼‰åŠŸèƒ½
    data = pd.DataFrame({'Column1': [1, 2, 3], 'Column2': ['A', 'B', 'C']})
    csv = data.to_csv().encode('utf-8')
    st.download_button(label="ä¸‹è¼‰CSV", data=csv, file_name='data.csv', mime='text/csv')

elif state.selected_tab == "HomeWork1":
    st.title("HomeWork1")

    # ä¸Šå‚³æ–‡ä»¶éƒ¨åˆ†
    file = st.file_uploader("ä¸Šå‚³CSVæ–‡ä»¶", type=['csv'])
    if file is not None:
        df = pd.read_csv(file)
        st.write(df)

        # ç¹ªåœ–
        selected_column = st.selectbox("é¸æ“‡è¦ç¹ªè£½çš„åˆ—", df.columns)
        st.line_chart(df[selected_column])
